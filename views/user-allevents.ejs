<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/style.css">

  <title>Home-page</title>
</head>

<body>
  <%- include('./partials/header.ejs') %>
    <!-- navigationbar -->
    <%- include('./partials/user-nav.ejs') %>
      <!--	end of nav  -->

      <div class="container">
        <div class="container-flex justify-content-center technical" id="technical">
          <h2 class="">Technical </h2>
          <!-- carosel slide  -->
          <div id="demo" class="carousel slide  slider" data-ride="carousel">
            <ul class="carousel-indicators">
              <li data-target="#demo" data-slide-to="0" class="active"></li>
              <li data-target="#demo" data-slide-to="1"></li>
              <li data-target="#demo" data-slide-to="2"></li>
            </ul>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="/images/tec_3.jpg" alt="Los Angeles" width="1100" height="500">
                <div class="carousel-caption slider-text">
                  <h3>WORKSHOPS</h3>
                  <p>We had such a great time in LA!</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="/images/tec_1.jpg" alt="Chicago" width="1100" height="500">
                <div class="carousel-caption slider-text">
                  <h3>GROUP CONTRIBUTIONS</h3>
                  <p>Thank you, Team CSE !</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="/images/tec_2.jpg" alt="New York" width="1100" height="500">
                <div class="carousel-caption slider-text">
                  <h3>MACHINE DESIGNING</h3>
                  <p>We love to Develop & Design!</p>
                </div>
              </div>
            </div>
            <a class="carousel-control-prev" href="#demo" data-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#demo" data-slide="next">
              <span class="carousel-control-next-icon"></span>
            </a>
          </div>
        </div>
        <div class="row upcoming">
          <h2>Upcoming Events</h2>
        </div>

        <% for (let i=0;i<tec.length; i++){ %>
          <% if(i%2==0){ %>
            <div class="row cards">
              <% } %>
                <div class="eventcard col-md-5" style="background-color: #2e2921;">
                  <div class="row">
                    <div class="col-4">
                      <img class="img-fluid" src="/uploads/<%-tec[i].poster%>">
                    </div>
                    <div class="col-8 text">
                      <p><b>eventid : </b><%- tec[i].eventid %></p>
                      <p><b>Title : </b><%- tec[i].programme %></p>
                      <p><b>Events : </b><%- tec[i].events %></p>
                      <p><b>Venue : </b><%- tec[i].loc %></p>
                      <p><b>Date : </b><%- tec[i].date.toLocaleDateString() %></p>
                      <p><b>Time</b><%- tec[i].time %></p>
                      <p><b>Description: </b><%- tec[i].des %></p>
<% let b = 0; %>
<% for (let j = 0; j < enrol.length; j++){ %>
  <% if(enrol[j].eventid == tec[i].eventid){ %>
    <!-- <% console.log(enrol[j].eventid) %> -->
    <% b = 1; %>
    <div class="row link">
      <form action="/user/<%- id %>/cancel" method="post" id="<%-tec[i].eventid%>">
        <input style="display: none;" name="userid" type="number" class="form-control"
          value="<%- id %>">
        <input style="display: none;" name="eventid" type="number" value="<%- tec[i].eventid %>"
          requried>
  
        <button type="submit" class="btn btn-link btn-sm btn-block">Cancel</button>
      </form>
    </div>
  <% break;} %>
<% } %>
<% if(b == 0){ %>
  <!-- <% console.log( tec[i].eventid) %> -->
  <div class="row link">
    <form action="/user/<%- id %>/register" method="post" id="<%-tec[i].eventid%>">
      <input style="display: none;" name="userid" type="number" class="form-control"
        value="<%- id %>">
      <input style="display: none;" name="eventid" type="number" value="<%- tec[i].eventid %>"
        requried>
      <input style="display: none;" name="status" type="text" value="register" requried>
      <button type="submit" class="btn btn-link btn-sm btn-block">Register</button>
    </form>
  </div>
  <% } %>



                    </div>
                  </div>
                </div>
                <% if(i%2 !=0 || i==tec.length){ %>
            </div>
            <% } %>
              <% } %>


                <div class="container-flex justify-content-center technical" id="cultural">
                  <h2 class="">Cultural </h2>
                  <!-- carosel slide  -->
                  <div id="demo" class="carousel slide  slider" data-ride="carousel">
                    <ul class="carousel-indicators">
                      <li data-target="#demo" data-slide-to="0" class="active"></li>
                      <li data-target="#demo" data-slide-to="1"></li>
                      <li data-target="#demo" data-slide-to="2"></li>
                    </ul>
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src="/images/cul_1.jpg" alt="Los Angeles" width="1100" height="500">
                        <div class="carousel-caption slider-text">
                          <h3>Salvate</h3>
                          <p>Happy to have you all !!</p>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <img src="/images/cul_3.jpeg" alt="Chicago" width="1100" height="500">
                        <div class="carousel-caption slider-text">
                          <h3>Vulcanzy</h3>
                          <p>Time to Show case all you have!</p>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <img src="/images/cul_2.jpg" alt="New York" width="1100" height="500">
                        <div class="carousel-caption slider-text">
                          <h3>New York</h3>
                          <p>We love the Big Apple!</p>
                        </div>
                      </div>
                    </div>
                    <a class="carousel-control-prev" href="#demo" data-slide="prev">
                      <span class="carousel-control-prev-icon"></span>
                    </a>
                    <a class="carousel-control-next" href="#demo" data-slide="next">
                      <span class="carousel-control-next-icon"></span>
                    </a>
                  </div>
                </div>
                <div class="row upcoming">
                  <h2>Upcoming Events</h2>
                </div>
                <% for (let i=0;i<cul.length; i++){ %>
                  <% if(i%2==0){ %>
                    <div class="row cards">
                      <% } %>
                        <div class="eventcard col-md-5" style="background-color: #040818;">
                          <div class="row">
                            <div class="col-4">
                              <img class="img-fluid" src="/uploads/<%-cul[i].poster%>">
                            </div>
                            <div class="col-8 text">
                              <p><b>Title : </b><%- cul[i].programme %></p>
                              <p><b>Events : </b><%- cul[i].events %></p>
                              <p><b>Venue : </b><%- cul[i].loc %></p>
                              <p><b>Date : </b><%- cul[i].date.toLocaleDateString() %></p>
                              <p><b>Time : </b><%- cul[i].time %></p>
                              <p><b>Description: </b><%- cul[i].des %></p>
                            
                              <% let b = 0; %>
                              <% for (let j = 0; j < enrol.length; j++){ %>
                                <% if(enrol[j].eventid == cul[i].eventid){ %>
                                  <!-- <% console.log(enrol[j].eventid) %> -->
                                  <% b = 1; %>
                                  <div class="row link">
                                    <form action="/user/<%- id %>/cancel" method="post" id="<%-cul[i].eventid%>">
                                      <input style="display: none;" name="userid" type="number" class="form-control"
                                        value="<%- id %>">
                                      <input style="display: none;" name="eventid" type="number" value="<%- cul[i].eventid %>"
                                        requried>
                                
                                      <button type="submit" class="btn btn-link btn-sm btn-block">Cancel</button>
                                    </form>
                                  </div>
                                <% break;} %>
                              <% } %>
                              <% if(b == 0){ %>
                                <!-- <% console.log( cul[i].eventid) %> -->
                                <div class="row link">
                                  <form action="/user/<%- id %>/register" method="post" id="<%-cul[i].eventid%>">
                                    <input style="display: none;" name="userid" type="number" class="form-control"
                                      value="<%- id %>">
                                    <input style="display: none;" name="eventid" type="number" value="<%- cul[i].eventid %>"
                                      requried>
                                    <input style="display: none;" name="status" type="text" value="register" requried>
                                    <button type="submit" class="btn btn-link btn-sm btn-block">Register</button>
                                  </form>
                                </div>
                                <% } %>

                            </div>
                          </div>
                        </div>
                        <% if(i%2 !=0 || i==cul.length){ %>
                    </div>
                    <% } %>
                      <% } %>


                        <div class="container-flex justify-content-center technical" id="sports">
                          <h2 class="">Sports</h2>
                          <!-- carosel slide  -->
                          <div id="demo" class="carousel slide  slider" data-ride="carousel">
                            <ul class="carousel-indicators">
                              <li data-target="#demo" data-slide-to="0" class="active"></li>
                              <li data-target="#demo" data-slide-to="1"></li>
                              <li data-target="#demo" data-slide-to="2"></li>
                            </ul>
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                <img src="/images/spo_3.jpg" alt="Los Angeles" width="1100" height="500">
                                <div class="carousel-caption slider-text">
                                  <h3>Winners</h3>
                                  <p>Success is where preparation and opportunity meet.</p>
                                </div>
                              </div>
                              <div class="carousel-item">
                                <img src="/images/spo_1.jpg" alt="Chicago" width="1100" height="500">
                                <div class="carousel-caption slider-text">
                                  <h3>Intramurals</h3>
                                  <p>Welcoming paticipents!</p>
                                </div>
                              </div>
                              <div class="carousel-item">
                                <img src="/images/spo_2.jpeg" alt="New York" width="1100" height="500">
                                <div class="carousel-caption slider-text">
                                  <h3>Congratulations</h3>
                                  <p>Our Campions ..</p>
                                </div>
                              </div>
                            </div>
                            <a class="carousel-control-prev" href="#demo" data-slide="prev">
                              <span class="carousel-control-prev-icon"></span>
                            </a>
                            <a class="carousel-control-next" href="#demo" data-slide="next">
                              <span class="carousel-control-next-icon"></span>
                            </a>
                          </div>
                        </div>
                        <div class="row upcoming">
                          <h2>Upcoming Events</h2>
                        </div>
                        <% for (let i=0;i<spo.length; i++){ %>
                          <% if(i%2==0){ %>
                            <div class="row cards">
                              <% } %>
                                <div class="eventcard col-md-5" style="background-color:#4F200D;">
                                  <div class="row">
                                    <div class="col-4">
                                      <img class="img-fluid" src="/uploads/<%-cul[i].poster%>">
                                    </div>
                                    <div class="col-8 text">
                                      <p><b>Title : </b><%- spo[i].programme %></p>
                                      <p><b>Events : </b><%- spo[i].events %></p>
                                      <p><b>Venue : </b><%- spo[i].loc %></p>
                                      <p><b>Date : </b><%- spo[i].date.toLocaleDateString() %></p>
                                      <p><b>Time : </b><%- spo[i].time %></p>
                                      <p><b>Description: </b><%- spo[i].des %></p>
                                      
<% let b = 0; %>
<% for (let j = 0; j < enrol.length; j++){ %>
  <% if(enrol[j].eventid == spo[i].eventid){ %>
    <!-- <% console.log(enrol[j].eventid) %> -->
    <% b = 1; %>
    <div class="row link">
      <form action="/user/<%- id %>/cancel" method="post" id="<%-spo[i].eventid%>">
        <input style="display: none;" name="userid" type="number" class="form-control"
          value="<%- id %>">
        <input style="display: none;" name="eventid" type="number" value="<%- spo[i].eventid %>"
          requried>
  
        <button type="submit" class="btn btn-link btn-sm btn-block">Cancel</button>
      </form>
    </div>
  <% break;} %>
<% } %>
<% if(b == 0){ %>
  <!-- <% console.log( spo[i].eventid) %> -->
  <div class="row link">
    <form action="/user/<%- id %>/register" method="post" id="<%-spo[i].eventid%>">
      <input style="display: none;" name="userid" type="number" class="form-control"
        value="<%- id %>">
      <input style="display: none;" name="eventid" type="number" value="<%- spo[i].eventid %>"
        requried>
      <input style="display: none;" name="status" type="text" value="register" requried>
      <button type="submit" class="btn btn-link btn-sm btn-block">Register</button>
    </form>
  </div>
  <% } %>

                                    </div>
                                  </div>
                                </div>
                                <% if(i%2 !=0 || i==spo.length){ %>
                            </div>
                            <% } %>
                              <% } %>
      </div>

      <!-- modals -->
      <div class="modal fade" id="warningModal" tabindex="-1" role="dialog" aria-labelledby="warningModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="warningModalLabel">Warning</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              You will be Loged out on moving to home.<br>
              Do you wish to proceed.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="redirectToIndex()">ok</button>
            </div>
          </div>
        </div>
      </div>
      </div>

      <div class="modal fade" id="succes" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Great decition username</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>Your booking is done sucessfull</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="failed" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Great decition username</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>Your registration failed <br>U might already been registered or Might by any network
                issue<br><b>Kindly
                  Try Again</b></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      </div>


      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>


      <script>
        function redirectToIndex() {
          window.location.href = "/";
        }


        for (let i = 0; i < tec.length; i++) {
          for (let j = 0; j < enrol.length; j++) {
            if (enrol[j].eventid == tec[i].eventid) {
              // console.log("exe");
              var id = tec[i].eventid;
              var card = document.getElementById("<%- id %>");
              card.elements["status"].value = "cancel";
              var button = form.querySelector("button[type='submit']");
              button.innerText = "Cancel";
            }
          }
        } 
      </script>

</body>

</html>